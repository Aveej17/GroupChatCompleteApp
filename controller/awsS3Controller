const AWS = require('aws-sdk');

// Set up AWS S3 config
const s3 = new AWS.S3({
    accessKeyId:process.env.IAM_USER_KEY,
    secretAccessKey:process.env.IAM_USER_SECRET
    
});


// Function to upload file to S3
exports.uploadFileToS3 = async (fileName, fileContent) => {
    const params = {
        Bucket: process.env.BUCKET_NAME, // Your bucket name
        Key: fileName, // File name you want to save as
        Body: fileContent, // File content (binary data)
        ContentType: 'image/jpg', // Change this to the correct content type for your file
        ACL:'public-read'
    };

    try {
        const data = await s3.upload(params).promise();
        return data.Location; // This returns the file URL
    } catch (err) {
        // console.error("Error uploading file to S3:", err);
        throw new Error("File upload failed");
    }
};
